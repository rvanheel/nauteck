@using MediatR
@inject IMediator Mediator;
@model nauteck.data.Entities.Order.FloorOrder

@{
    var parts = await Mediator.Send(new nauteck.core.Features.Order.Queries.FloorOrderPartQuery(string.IsNullOrEmpty(Model.Id) ? Guid.Empty : Guid.Parse(Model.Id)));
}


<div class="card w-100">
    <div class="card-header">
        <i class="bi bi-file-earmark-text"></i>&nbsp;Order Summary
    </div>
    <div class="card-body">

        <div class="row">
            <div class="col small">Nauteck Floor</div>
            <div class="col small"><span class="text-muted float-end" data-type="floor-sum">@($"{(parts.FloorQuantity * parts.FloorPrice):n2}")</span></div>
        </div>
        <div class="row">
            <div class="col text-muted small"><span data-type="floor">@parts.Floor</span></div>
            <div class="col text-muted "><small><span data-type="floor-quantity">@($"{parts.FloorQuantity:n2}")</span> m2 * <span data-type="floor-price">@($"{parts.FloorPrice:n2}")</span></small></div>
        </div>

        <div class="row">
            <div class="col small">Color Above</div>
            <div class="col small">Color Below</div>
            <div class="col">&nbsp;</div>
            <div class="col small"><span class="text-muted float-end" data-type="color-price">@($"{parts.ColorTotal:n2}")</span></div>
        </div>
        <div class="row">
            <div class="col text-muted"><small class="" data-type="color-above">@parts.FloorColorAbove</small></div>
            <div class="col text-muted"><small class="" data-type="color-below">@parts.FloorColorBeneath</small></div>
            <div class="col text-muted small"><span data-type="color" class="text-danger"></span></div>
            <div class="col">&nbsp;</div>
        </div>

        <div class="row">
            <div class="col small">Design</div>
            <div class="col small"><span class="text-muted float-end" data-type="design-price">@($"{parts.DesignTotal:n2}")</span></div>
        </div>
        <div class="row">
            <div class="col"><small class="text-muted" data-type="design">@parts.Design</small></div>
        </div>

        <div class="row">
            <div class="col small">Logo</div>
            <div class="col small"><span class="text-muted float-end" data-type="logo-price">@($"{parts.LogoTotal:n2}")</span></div>
        </div>
        <div class="row">
            <div class="col"><small class="text-muted" data-type="logo"></small></div>
        </div>

        <div class="row">
            <div class="col small">Measurement</div>
            <div class="col small"><span class="text-muted float-end" data-type="measurement-price">@($"{parts.MeasurementTotal:n2}")</span></div>
        </div>
        <div class="row">
            <div class="col"><small class="text-muted" data-type="measurement">@parts.Measurement</small></div>
        </div>

        <div class="row">
            <div class="col small">CallOut Cost</div>
            <div class="col small"><span class="text-muted float-end" data-type="call-out-cost-price">@($"{parts.CallOutCostTotal:n2}")</span></div>
        </div>
        <div class="row">
            <div class="col"><small class="text-muted" data-type="call-out-cost">@($"{parts.CallOutCostQuantity:n1}") * @($"{parts.CallOutCostPrice:n2}") per km</small></div>
        </div>

        <div class="row">
            <div class="col small">Construction</div>
            <div class="col small"><span class="text-muted float-end" data-type="construction-price">@($"{parts.ConstructionTotal:n2}")</span></div>
        </div>
        <div class="row mb-1">
            <div class="col"><small class="text-muted" data-type="construction">@parts.Construction</small></div>
        </div>

        <div class="row">
            <div class="col small">Other</div>
            <div class="col small"><span class="text-muted float-end" data-type="other-price">@($"{Model.FreePrice:n2}")</span></div>
        </div>
        <div class="row mb-1">
            <div class="col"><small class="text-muted" data-type="other">@Model.FreePriceText</small></div>
        </div>


        <div class="row mb-1" discount="">
            <div class="col fw-bold small">Subtotal excluding VAT</div>
            <div class="col small"><span class="text-muted float-end fw-bold" data-type="subtotal-price">@(Model.Total - Model.Discount)</span></div>
        </div>

        <div class="row bg-light" discount="">
            <div class="col fw-bold text-success small">Discount</div>
            <div class="col small"><span class="float-end fw-bold text-success" data-type="discount-price">- @Model.Discount</span></div>
        </div>


        <div class="row">
            <div class="col fw-bold small">Total excluding VAT</div>
            <div class="col small"><span class="text-muted float-end fw-bold" data-type="floor-order-total">@Model.Total</span></div>
        </div>
    </div>
</div>