(()=>{"use strict";class e{static FullDateTimeFormat={timeZone:"Europe/Amsterdam",dateStyle:"full",timeStyle:"medium"};static async GetBlobSasUrl(e,t,r){const o=new URL(t,e);o.searchParams.append("extension",r);const n=await fetch(o.href,{cache:"no-cache"});return await n.json()}static GetHtmlInputElement(e){return document.querySelector(e)}static GetHtmlInputElementById(e){return document.getElementById(e)}static GetHtmlSelectElement(e){return document.querySelector(e)}static GetHtmlSelectElementById(e){return document.getElementById(e)}static GetSelectOption(t){const r=e.GetHtmlSelectElementById(t);return r.options[r.selectedIndex]}static RemoveToastr(){toastr.remove()}static SetHtmlTextContent(e,t){document.querySelector(e).textContent=t}static ShowToastr(e="Please wait..",t="LOADING"){toastr.info(e,t,{closeButton:!1,extendedTimeOut:0,hideDuration:10,hideMethod:"slideUp",newestOnTop:!0,positionClass:"toast-top-center",preventDuplicates:!0,showDuration:10,showMethod:"slideDown",tapToDismiss:!1,timeOut:0})}static ToastrError(e,t){toastr.error(t,e,{hideMethod:"slideUp",hideDuration:10,newestOnTop:!0,positionClass:"toast-top-center",preventDuplicates:!0,showDuration:10,showMethod:"slideDown"})}static UploadNewBlob(e,t,r){return fetch(t,{body:r,cache:"no-cache",headers:{"x-ms-content-type":e,"x-ms-blob-type":"BlockBlob","x-ms-version":"2020-10-02"},method:"PUT"})}}const t=e;class r{static abortController=null;static async AddressCheck(){r.abortController&&(r.abortController.abort(),console.error("aborting previous request")),r.abortController=new AbortController;const e=r.abortController.signal,o=document.getElementById("form-client").elements,n=o.Zipcode,a=n.value.trim(),s=+o.Number.value,i=o.Address,l=o.City,d=o.Region;if(i.value="",l.value="",d.value="",t.GetHtmlInputElementById("Address").setAttribute("readonly","readonly"),t.GetHtmlInputElementById("City").setAttribute("readonly","readonly"),t.GetHtmlInputElementById("Region").setAttribute("readonly","readonly"),!o.Country.value.match(/Nederland/i))return t.GetHtmlInputElementById("Address").removeAttribute("readonly"),t.GetHtmlInputElementById("City").removeAttribute("readonly"),void t.GetHtmlInputElementById("Region").removeAttribute("readonly");const c=new URL("/bzk/locatieserver/search/v3_1/free","https://api.pdok.nl");c.searchParams.append("q",`postcode:${a}`),c.searchParams.append("fq",`huisnummer:${s}`),c.searchParams.append("fl","woonplaatsnaam,straatnaam,huisnummer,postcode,provincienaam"),c.searchParams.append("rows","1");const m=await fetch(c.toString(),{method:"GET",cache:"no-cache",redirect:"follow",signal:e}),u=await m.json();if(m.ok&&u?.response?.numFound){const e=u.response.docs[0];return i.value=e.straatnaam,l.value=e.woonplaatsnaam,d.value=e.provincienaam,void(n.value=e.postcode)}r.abortController=null}static Initialize(){document.getElementById("Country").addEventListener("change",r.AddressCheck,!1),document.getElementById("Zipcode").addEventListener("blur",r.AddressCheck,!1),document.getElementById("Number").addEventListener("blur",r.AddressCheck,!1),r.InitForm()}static InitForm(){$("#form-client").validate({messages:{BoatBrand:"Merk is vereist",BoatType:"Type is vereist",Email:"Email is vereist",LastName:"Achternaam is vereist",Address:"Adres is vereist",City:"Plaats is vereist",Region:"Provincie is vereist",Zipcode:"Postcode is vereist",Number:"Huisnummer is vereist"},rules:{BoatBrand:"required",BoatType:"required",Email:"required",LastName:"required",Address:"required",City:"required",Region:"required",Zipcode:"required",Number:"required"},submitHandler(e,r){r.preventDefault();var o=new FormData(e);const n=new URL(e.action,window.location.origin);fetch(n.href,{body:o,method:"POST"}).then((e=>{e.ok?window.location.replace("/"):t.ToastrError("Error","Er is een fout opgetreden bij het opslaan van de order.")}))}})}}document.addEventListener("DOMContentLoaded",r.Initialize)})();