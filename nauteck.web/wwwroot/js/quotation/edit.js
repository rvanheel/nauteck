(()=>{"use strict";class t{static FullDateTimeFormat={timeZone:"Europe/Amsterdam",dateStyle:"full",timeStyle:"medium"};static Delete(e,o,n,a,i){bootbox.confirm({message:`<div class="alert alert-warning"><p class="fw-bold">${o}</p><p><strong>LET OP!</strong> ${n}.</p></div>`,buttons:{confirm:{label:"Ja",className:"btn-danger"},cancel:{label:"Nee",className:"btn-secondary"}},callback:async o=>{if(!o)return;t.ShowToastr();const n=e.dataset.url;if(!(await fetch(n,{method:"DELETE",cache:"no-cache",redirect:"follow"})).ok)return t.RemoveToastr(),void t.ToastrError("Error",a);window.location.assign(i),window.location.reload()}})}static FloorDescriptionChange(){this.closest("form").elements.Amount.value=this.options[this.selectedIndex].dataset.price}static async GetBlobSasUrl(t,e,o){const n=new URL(e,t);n.searchParams.append("extension",o);const a=await fetch(n.href,{cache:"no-cache"});return await a.json()}static GetHtmlInputElement(t){return document.querySelector(t)}static GetHtmlInputElementById(t){return document.getElementById(t)}static GetHtmlSelectElementById(t){return document.getElementById(t)}static GetSelectOption(e){const o=t.GetHtmlSelectElementById(e);return o.options[o.selectedIndex]}static InitInvoiceOrQuotationFormLine(t){$(t).validate({messages:{Amount:"Bedrag is vereist",Description:"Omschrijving is vereist",Quantity:"Aantal is vereist"},rules:{Amount:{required:!0,number:!0},Description:{required:!0},Quantity:{required:!0,number:!0}}})}static RemoveToastr(){toastr.clear()}static SetHtmlTextContent(t,e){document.querySelector(t).textContent=e}static ShowModalLine(t,e){const o=$(t),n=document.getElementById(e);n.reset(),n.elements.namedItem("Id").value="00000000-0000-0000-0000-000000000000",o.on("show.bs.modal",(function(){setTimeout((()=>{n.elements.namedItem("Quantity").focus()}),250)})),o.modal("show")}static ShowToastr(t="Please wait..",e="LOADING"){toastr.info(t,e,{closeButton:!1,extendedTimeOut:0,hideDuration:10,hideMethod:"slideUp",newestOnTop:!0,positionClass:"toast-top-center",preventDuplicates:!0,showDuration:10,showMethod:"slideDown",tapToDismiss:!1,timeOut:0})}static ToastrError(t,e){toastr.error(e,t,{hideMethod:"slideUp",hideDuration:10,newestOnTop:!0,positionClass:"toast-top-center",preventDuplicates:!0,showDuration:10,showMethod:"slideDown"})}static UniqueId(){return Math.random().toString(36).substring(2,10)}static UploadNewBlob(t,e,o){return fetch(e,{body:o,cache:"no-cache",headers:{"x-ms-content-type":t,"x-ms-blob-type":"BlockBlob","x-ms-version":"2020-10-02"},method:"PUT"})}}const e=t;class o{static AddColor(){e.ShowModalLine("#modal-quotation-color","form-color-line")}static AddFloor(){e.ShowModalLine("#modal-quotation-floor","form-floor-line")}static AddLine(){e.ShowModalLine("#modal-quotation-line","form-quotation-line")}static EditLine(){const t=this,e=$("#modal-quotation-line"),o=document.getElementById("form-quotation-line");o.reset(),o.elements.namedItem("Id").value=t.dataset.id,o.elements.namedItem("Amount").value=t.dataset.amount,o.elements.namedItem("Description").value=t.dataset.description,o.elements.namedItem("Tax").value=t.dataset.tax,o.elements.namedItem("Quantity").value=t.dataset.quantity,e.modal("show")}static Initialize(){["#form-invoice-line","#form-floor-line","#form-color-line"].forEach(e.InitInvoiceOrQuotationFormLine),document.getElementById("button-add-color").addEventListener("click",o.AddColor),document.getElementById("button-add-floor").addEventListener("click",o.AddFloor),document.getElementById("button-add-line").addEventListener("click",o.AddLine),document.querySelectorAll("button[data-type='edit']").forEach((t=>t.addEventListener("click",o.EditLine))),["Omschrijving_1","Omschrijving_2"].forEach((t=>e.GetHtmlSelectElementById(t).addEventListener("change",e.FloorDescriptionChange)))}}document.addEventListener("DOMContentLoaded",o.Initialize)})();